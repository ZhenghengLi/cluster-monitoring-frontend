<app-navbar class="mat-elevation-z4"></app-navbar>
<div class="my-content">
    <mat-card class="mat-elevation-z0">
        <mat-card-header>
            <mat-card-title>Overview</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-grid-list cols="2" rowHeight="250px" gutterSize="16px">
                <mat-grid-tile>
                    <app-time-percent-chart
                        [title]="'CPU utilization'"
                        [data]="cpuUtilChart | async"
                    ></app-time-percent-chart>
                </mat-grid-tile>
                <mat-grid-tile>
                    <app-time-percent-chart
                        [title]="'CPU memory'"
                        [data]="cpuMemChart | async"
                    ></app-time-percent-chart>
                </mat-grid-tile>
                <mat-grid-tile>
                    <app-time-percent-chart
                        [title]="'GPU utilization'"
                        [data]="gpuUtilChart | async"
                    ></app-time-percent-chart>
                </mat-grid-tile>
                <mat-grid-tile>
                    <app-time-percent-chart
                        [title]="'GPU memory'"
                        [data]="gpuMemChart | async"
                    ></app-time-percent-chart>
                </mat-grid-tile>
            </mat-grid-list>
        </mat-card-content>
    </mat-card>
    <mat-card class="mat-elevation-z0">
        <mat-card-header>
            <mat-card-title>Top users</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <table *ngIf="topUsersChart | async as chartData" mat-table [dataSource]="chartData" [trackBy]="trackChart">
                <ng-container matColumnDef="name">
                    <th class="col1" mat-header-cell *matHeaderCellDef>Name</th>
                    <td class="col1" mat-cell *matCellDef="let element">{{ element.name }}</td>
                </ng-container>
                <ng-container matColumnDef="utilization">
                    <th class="col2" mat-header-cell *matHeaderCellDef>CPU utilization</th>
                    <td class="col2" mat-cell *matCellDef="let element">
                        <app-time-percent-chart [data]="element.utilization"></app-time-percent-chart>
                    </td>
                </ng-container>
                <ng-container matColumnDef="memory">
                    <th class="col3" mat-header-cell *matHeaderCellDef>CPU memory</th>
                    <td class="col3" mat-cell *matCellDef="let element">
                        <app-time-percent-chart [data]="element.memory"></app-time-percent-chart>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="topUsersColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: topUsersColumns"></tr>
            </table>
        </mat-card-content>
    </mat-card>
</div>
